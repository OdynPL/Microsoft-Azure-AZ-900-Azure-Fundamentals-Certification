<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="600">
  <style>
    .box { fill:#eef4ff; stroke:#4a84f4; stroke-width:2; rx:10; }
    .sub { fill:#ffffff; stroke:#7aa3f0; stroke-width:1.6; rx:8; }
    .title { font-family: Arial; font-size: 22px; font-weight: bold; }
    text { font-family: Arial; font-size: 14px; }
  </style>

  <text x="550" y="40" text-anchor="middle" class="title">
    User Authentication Flow - Microsoft Entra ID
  </text>

  <rect x="50" y="70" width="1000" height="480" class="box"/>
  <text x="550" y="110" text-anchor="middle" style="font-size:16px;font-weight:bold;">
    Identify user → Authenticate → Conditional Access → Tokens → App access
  </text>

  <!-- USER -->
  <rect x="80" y="170" width="260" height="140" class="sub"/>
  <text x="210" y="200" text-anchor="middle" style="font-weight:bold;">User</text>
  <text x="210" y="225" text-anchor="middle">Enter UPN</text>
  <text x="210" y="245" text-anchor="middle">Password / FIDO2 / Hello</text>

  <text x="360" y="240" text-anchor="middle" style="font-size:28px;">→</text>

  <!-- ENTRA AUTH -->
  <rect x="390" y="150" width="320" height="180" class="sub"/>
  <text x="550" y="180" text-anchor="middle" style="font-weight:bold;">Microsoft Entra ID</text>
  <text x="550" y="205" text-anchor="middle">Identity validation</text>
  <text x="550" y="225" text-anchor="middle">Credential checks</text>
  <text x="550" y="245" text-anchor="middle">Authentication result</text>

  <text x="720" y="240" text-anchor="middle" style="font-size:28px;">→</text>

  <!-- CONDITIONAL ACCESS -->
  <rect x="750" y="150" width="260" height="180" class="sub"/>
  <text x="880" y="180" text-anchor="middle" style="font-weight:bold;">Conditional Access</text>
  <text x="880" y="205" text-anchor="middle">Risk / Location</text>
  <text x="880" y="225" text-anchor="middle">Device compliance</text>
  <text x="880" y="245" text-anchor="middle">Require MFA / allow / block</text>

  <!-- TOKENS -->
  <rect x="220" y="360" width="300" height="150" class="sub"/>
  <text x="370" y="390" text-anchor="middle" style="font-weight:bold;">Tokens</text>
  <text x="370" y="415" text-anchor="middle">ID Token</text>
  <text x="370" y="435" text-anchor="middle">Access Token</text>
  <text x="370" y="455" text-anchor="middle">Refresh Token</text>

  <text x="550" y="440" text-anchor="middle" style="font-size:28px;">→</text>

  <!-- APPLICATION -->
  <rect x="580" y="360" width="430" height="150" class="sub"/>
  <text x="795" y="390" text-anchor="middle" style="font-weight:bold;">Application / Resource</text>
  <text x="795" y="415" text-anchor="middle">Validates Access Token</text>
  <text x="795" y="435" text-anchor="middle">User granted access</text>

</svg>