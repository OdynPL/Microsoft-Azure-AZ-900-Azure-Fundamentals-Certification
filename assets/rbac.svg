<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="550">
  <style>
    .box { fill:#eef4ff; stroke:#4a84f4; stroke-width:2; rx:10; }
    .sub { fill:#ffffff; stroke:#7aa3f0; stroke-width:1.6; rx:8; }
    .title { font-family: Arial; font-size: 22px; font-weight: bold; }
    text { font-family: Arial; font-size: 14px; }
  </style>

  <text x="550" y="40" text-anchor="middle" class="title">
    RBAC - How Access Decision is Made
  </text>

  <rect x="50" y="70" width="1000" height="430" class="box"/>
  <text x="550" y="110" text-anchor="middle" style="font-size:16px;font-weight:bold;">
    Identity → Role Assignment → Scope → Access Allowed or Denied
  </text>

  <!-- IDENTITY -->
  <rect x="80" y="160" width="260" height="150" class="sub"/>
  <text x="210" y="190" text-anchor="middle" style="font-weight:bold;">Identity</text>
  <text x="210" y="215" text-anchor="middle">User / Group</text>
  <text x="210" y="235" text-anchor="middle">Service Principal</text>
  <text x="210" y="255" text-anchor="middle">Managed Identity</text>

  <text x="360" y="240" text-anchor="middle" style="font-size:28px;">→</text>

  <!-- ROLE ASSIGNMENT -->
  <rect x="390" y="150" width="300" height="170" class="sub"/>
  <text x="540" y="180" text-anchor="middle" style="font-weight:bold;">Role Assignment</text>
  <text x="540" y="205" text-anchor="middle">Role: Owner / Contributor / Reader</text>
  <text x="540" y="225" text-anchor="middle">Or custom role (actions)</text>
  <text x="540" y="245" text-anchor="middle">Attached to scope</text>

  <text x="720" y="240" text-anchor="middle" style="font-size:28px;">→</text>

  <!-- SCOPE -->
  <rect x="750" y="160" width="260" height="150" class="sub"/>
  <text x="880" y="190" text-anchor="middle" style="font-weight:bold;">Scope</text>
  <text x="880" y="215" text-anchor="middle">Subscription</text>
  <text x="880" y="235" text-anchor="middle">Resource Group</text>
  <text x="880" y="255" text-anchor="middle">Specific Resource</text>

  <!-- DECISION -->
  <rect x="250" y="360" width="600" height="120" class="sub"/>
  <text x="550" y="390" text-anchor="middle" style="font-weight:bold;">Access Decision</text>
  <text x="550" y="415" text-anchor="middle">Entra ID issues token with role claims</text>
  <text x="550" y="435" text-anchor="middle">Resource checks role + scope → allow or deny</text>
</svg>