<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520">
  <defs>
    <linearGradient id="nsgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a5276;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="allowGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e8449;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#27ae60;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="denyGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#922b21;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="subnetGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#5b2c6f;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="nicGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1f618d;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3498db;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="tagGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#b7950b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f1c40f;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowNsg" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#2980b9"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#27ae60"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#c0392b"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="520" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Segoe UI, Arial" font-size="20" font-weight="600" fill="#2c3e50">NSG (Network Security Groups) - Struktura i ewaluacja regu≈Ç</text>
  
  <!-- Left section: NSG Structure -->
  <rect x="20" y="50" width="420" height="220" rx="10" fill="#ecf0f1" stroke="#bdc3c7"/>
  <text x="230" y="75" text-anchor="middle" font-family="Segoe UI, Arial" font-size="14" font-weight="600" fill="#2c3e50">STRUKTURA NSG</text>
  
  <!-- NSG Box -->
  <rect x="40" y="90" width="380" height="165" rx="8" fill="url(#nsgGrad)"/>
  <text x="230" y="115" text-anchor="middle" font-family="Segoe UI, Arial" font-size="13" font-weight="600" fill="white">myNSG</text>
  
  <!-- Inbound Rules -->
  <rect x="55" y="125" width="170" height="120" rx="5" fill="white" fill-opacity="0.15"/>
  <text x="140" y="145" text-anchor="middle" font-family="Segoe UI, Arial" font-size="11" font-weight="600" fill="white">REGU≈ÅY INBOUND</text>
  
  <rect x="65" y="155" width="150" height="18" rx="3" fill="url(#allowGrad)"/>
  <text x="140" y="168" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white">100: Allow SSH (22)</text>
  
  <rect x="65" y="177" width="150" height="18" rx="3" fill="url(#allowGrad)"/>
  <text x="140" y="190" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white">200: Allow HTTP (80)</text>
  
  <rect x="65" y="199" width="150" height="18" rx="3" fill="url(#denyGrad)"/>
  <text x="140" y="212" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white">65500: Deny All (default)</text>
  
  <!-- Outbound Rules -->
  <rect x="235" y="125" width="170" height="120" rx="5" fill="white" fill-opacity="0.15"/>
  <text x="320" y="145" text-anchor="middle" font-family="Segoe UI, Arial" font-size="11" font-weight="600" fill="white">REGU≈ÅY OUTBOUND</text>
  
  <rect x="245" y="155" width="150" height="18" rx="3" fill="url(#allowGrad)"/>
  <text x="320" y="168" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white">100: Allow HTTPS (443)</text>
  
  <rect x="245" y="177" width="150" height="18" rx="3" fill="url(#allowGrad)"/>
  <text x="320" y="190" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white">65000: Allow VNet (default)</text>
  
  <rect x="245" y="199" width="150" height="18" rx="3" fill="url(#denyGrad)"/>
  <text x="320" y="212" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white">65500: Deny All (default)</text>
  
  <!-- Right section: Rule Evaluation -->
  <rect x="460" y="50" width="420" height="220" rx="10" fill="#ecf0f1" stroke="#bdc3c7"/>
  <text x="670" y="75" text-anchor="middle" font-family="Segoe UI, Arial" font-size="14" font-weight="600" fill="#2c3e50">EWALUACJA REGU≈Å (wg Priority)</text>
  
  <!-- Flow diagram -->
  <rect x="480" y="95" width="80" height="35" rx="5" fill="#3498db"/>
  <text x="520" y="117" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="white">Ruch</text>
  <text x="520" y="127" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">przychodzƒÖcy</text>
  
  <line x1="560" y1="112" x2="590" y2="112" stroke="#2980b9" stroke-width="2" marker-end="url(#arrowNsg)"/>
  
  <rect x="595" y="95" width="90" height="35" rx="5" fill="#9b59b6"/>
  <text x="640" y="112" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="white">Priority 100</text>
  <text x="640" y="124" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">(Allow SSH)</text>
  
  <!-- Match path -->
  <line x1="640" y1="130" x2="640" y2="155" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="655" y="145" font-family="Segoe UI, Arial" font-size="8" fill="#27ae60">MATCH</text>
  
  <rect x="595" y="160" width="90" height="30" rx="5" fill="url(#allowGrad)"/>
  <text x="640" y="180" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="white">‚úì ALLOW</text>
  
  <!-- No match path -->
  <line x1="685" y1="112" x2="715" y2="112" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowRed)"/>
  <text x="700" y="105" font-family="Segoe UI, Arial" font-size="7" fill="#e74c3c">NO MATCH</text>
  
  <rect x="720" y="95" width="90" height="35" rx="5" fill="#9b59b6"/>
  <text x="765" y="112" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="white">Priority 200</text>
  <text x="765" y="124" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">(Allow HTTP)</text>
  
  <line x1="810" y1="112" x2="810" y2="155" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowRed)"/>
  <text x="825" y="138" font-family="Segoe UI, Arial" font-size="7" fill="#e74c3c">NO</text>
  
  <rect x="765" y="160" width="90" height="30" rx="5" fill="#7f8c8d"/>
  <text x="810" y="175" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white">Priority 65500</text>
  <text x="810" y="186" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">(Deny All)</text>
  
  <line x1="810" y1="190" x2="810" y2="215" stroke="#c0392b" stroke-width="2" marker-end="url(#arrowRed)"/>
  
  <rect x="765" y="220" width="90" height="30" rx="5" fill="url(#denyGrad)"/>
  <text x="810" y="240" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="white">‚úó DENY</text>
  
  <!-- Priority note -->
  <rect x="480" y="200" width="170" height="50" rx="5" fill="#fff3cd" stroke="#ffc107"/>
  <text x="565" y="218" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" font-weight="600" fill="#856404">üí° WA≈ªNE:</text>
  <text x="565" y="232" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="#856404">Ni≈ºszy numer Priority</text>
  <text x="565" y="244" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="#856404">= WY≈ªSZY priorytet!</text>
  
  <!-- Bottom section: NSG Attachment -->
  <rect x="20" y="285" width="430" height="225" rx="10" fill="#ecf0f1" stroke="#bdc3c7"/>
  <text x="235" y="310" text-anchor="middle" font-family="Segoe UI, Arial" font-size="14" font-weight="600" fill="#2c3e50">PRZYPISANIE NSG</text>
  
  <!-- VNet box -->
  <rect x="40" y="325" width="390" height="170" rx="8" fill="#d5dbdb" stroke="#99a3a4"/>
  <text x="235" y="345" text-anchor="middle" font-family="Segoe UI, Arial" font-size="11" font-weight="600" fill="#2c3e50">VNet (10.0.0.0/16)</text>
  
  <!-- Subnet with NSG -->
  <rect x="60" y="360" width="170" height="125" rx="6" fill="url(#subnetGrad)"/>
  <text x="145" y="380" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" font-weight="600" fill="white">Subnet-Web</text>
  <text x="145" y="393" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">(10.0.1.0/24)</text>
  
  <!-- NSG at subnet level -->
  <rect x="75" y="400" width="70" height="22" rx="3" fill="url(#nsgGrad)"/>
  <text x="110" y="415" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">NSG-Subnet</text>
  
  <!-- VMs -->
  <rect x="75" y="430" width="55" height="45" rx="4" fill="url(#nicGrad)"/>
  <text x="102" y="450" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">VM1</text>
  <rect x="88" y="460" width="30" height="12" rx="2" fill="#2980b9"/>
  <text x="103" y="469" text-anchor="middle" font-family="Segoe UI, Arial" font-size="6" fill="white">NIC</text>
  
  <rect x="140" y="430" width="55" height="45" rx="4" fill="url(#nicGrad)"/>
  <text x="167" y="450" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">VM2</text>
  <rect x="145" y="460" width="45" height="12" rx="2" fill="url(#nsgGrad)"/>
  <text x="167" y="469" text-anchor="middle" font-family="Segoe UI, Arial" font-size="6" fill="white">NSG-NIC</text>
  
  <!-- Subnet without NSG -->
  <rect x="245" y="360" width="170" height="125" rx="6" fill="url(#subnetGrad)"/>
  <text x="330" y="380" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" font-weight="600" fill="white">Subnet-DB</text>
  <text x="330" y="393" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">(10.0.2.0/24)</text>
  
  <text x="330" y="418" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="white" fill-opacity="0.7">(brak NSG)</text>
  
  <rect x="275" y="430" width="55" height="45" rx="4" fill="url(#nicGrad)"/>
  <text x="302" y="450" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">DB-VM</text>
  <rect x="280" y="460" width="45" height="12" rx="2" fill="url(#nsgGrad)"/>
  <text x="302" y="469" text-anchor="middle" font-family="Segoe UI, Arial" font-size="6" fill="white">NSG-DB</text>
  
  <rect x="340" y="430" width="55" height="45" rx="4" fill="url(#nicGrad)"/>
  <text x="367" y="450" text-anchor="middle" font-family="Segoe UI, Arial" font-size="8" fill="white">Dev-VM</text>
  <text x="367" y="468" text-anchor="middle" font-family="Segoe UI, Arial" font-size="7" fill="white" fill-opacity="0.7">brak NSG</text>
  
  <!-- Right bottom: Service Tags -->
  <rect x="460" y="285" width="420" height="225" rx="10" fill="#ecf0f1" stroke="#bdc3c7"/>
  <text x="670" y="310" text-anchor="middle" font-family="Segoe UI, Arial" font-size="14" font-weight="600" fill="#2c3e50">SERVICE TAGS</text>
  
  <text x="490" y="335" font-family="Segoe UI, Arial" font-size="10" fill="#2c3e50">Predefiniowane grupy IP zarzƒÖdzane przez Microsoft:</text>
  
  <!-- Service Tags list -->
  <rect x="490" y="350" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="570" y="368" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">Internet</text>
  
  <rect x="490" y="385" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="570" y="403" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">VirtualNetwork</text>
  
  <rect x="490" y="420" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="570" y="438" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">AzureLoadBalancer</text>
  
  <rect x="490" y="455" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="570" y="473" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">Storage</text>
  
  <rect x="670" y="350" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="750" y="368" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">Sql</text>
  
  <rect x="670" y="385" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="750" y="403" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">AzureActiveDirectory</text>
  
  <rect x="670" y="420" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="750" y="438" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">AzureMonitor</text>
  
  <rect x="670" y="455" width="160" height="28" rx="4" fill="url(#tagGrad)"/>
  <text x="750" y="473" text-anchor="middle" font-family="Segoe UI, Arial" font-size="10" fill="#5d4037" font-weight="600">AzureKeyVault</text>
  
  <!-- Benefit note -->
  <rect x="530" y="490" width="270" height="22" rx="4" fill="#d4edda" stroke="#28a745"/>
  <text x="665" y="505" text-anchor="middle" font-family="Segoe UI, Arial" font-size="9" fill="#155724">‚úì Automatycznie aktualizowane przez Microsoft</text>
</svg>