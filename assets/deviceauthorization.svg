<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="620">
  <style>
    .box { fill:#eef4ff; stroke:#4a84f4; stroke-width:2; rx:10; }
    .sub { fill:#ffffff; stroke:#7aa3f0; stroke-width:1.6; rx:8; }
    .title { font-family: Arial; font-size: 22px; font-weight: bold; }
    text { font-family: Arial; font-size: 14px; }
  </style>

  <text x="550" y="40" text-anchor="middle" class="title">
    Device Authentication Flow - Microsoft Entra ID
  </text>

  <rect x="50" y="70" width="1000" height="510" class="box"/>
  <text x="550" y="110" text-anchor="middle" style="font-size:16px;font-weight:bold;">
    Register/Join → Device identity → Compliance check → Token issue → Resource access
  </text>

  <!-- DEVICE -->
  <rect x="80" y="170" width="300" height="150" class="sub"/>
  <text x="230" y="200" text-anchor="middle" style="font-weight:bold;">Device</text>
  <text x="230" y="225" text-anchor="middle">AAD Registered / AAD Joined</text>
  <text x="230" y="245" text-anchor="middle">Hybrid Joined (optional)</text>

  <text x="400" y="245" text-anchor="middle" style="font-size:28px;">→</text>

  <!-- ENTRA DEVICE REG -->
  <rect x="430" y="150" width="300" height="190" class="sub"/>
  <text x="580" y="180" text-anchor="middle" style="font-weight:bold;">Microsoft Entra ID</text>
  <text x="580" y="205" text-anchor="middle">Device identity and cert</text>
  <text x="580" y="225" text-anchor="middle">Auth to tenant</text>
  <text x="580" y="245" text-anchor="middle">Issue device claims</text>

  <text x="750" y="245" text-anchor="middle" style="font-size:28px;">→</text>

  <!-- COMPLIANCE -->
  <rect x="780" y="150" width="270" height="190" class="sub"/>
  <text x="915" y="180" text-anchor="middle" style="font-weight:bold;">Compliance and CA</text>
  <text x="915" y="205" text-anchor="middle">Intune compliance state</text>
  <text x="915" y="225" text-anchor="middle">Conditional Access checks</text>
  <text x="915" y="245" text-anchor="middle">Require MFA / allow / block</text>

  <!-- TOKENS BOX -->
  <rect x="220" y="360" width="660" height="150" class="sub"/>
  <text x="550" y="390" text-anchor="middle" style="font-weight:bold;">Tokens and Access</text>
  <text x="550" y="415" text-anchor="middle">ID/Access tokens include device claims</text>
  <text x="550" y="435" text-anchor="middle">Apps validate tokens and grant access</text>
</svg>